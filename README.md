# 💬 Интерактивный Чат - Демонстрация Сетевого Программирования

## 🎯 Описание проекта

Полнофункциональная система интерактивного чата, демонстрирующая работу с сокетами, TCP/IP протоколами и клиент-серверной архитектурой. Проект реализует все требования по дисциплине "Основы построения и функционирования сетей".

## ✨ Возможности

- 🚀 **Множественные клиенты** - поддержка одновременного подключения нескольких пользователей
- 💬 **Общий чат** - обмен сообщениями между всеми пользователями
- 🔒 **Приватные сообщения** - отправка личных сообщений конкретному пользователю
- 👥 **Список пользователей** - просмотр онлайн пользователей
- ⏰ **Время сервера** - получение текущего времени сервера
- 🏓 **Ping/Pong** - проверка соединения с сервером
- 🎨 **Красивый интерфейс** - цветовое кодирование и эмодзи
- 📱 **Команды** - удобные команды для управления чатом

## 🏗️ Архитектура проекта

### 📁 Структура решения

```
NetworkChatSolution/
├── ChatCommon/          # 🔧 Общая библиотека протокола
├── ChatServer/          # 🖥️ TCP сервер чата
├── ChatClient/          # 💻 Консольный клиент
├── ChatTests/           # 🧪 Модульные тесты
└── packages/            # 📦 Зависимости NuGet
```

### 🔧 ChatCommon - Общая библиотека протокола

**Назначение**: Центральная библиотека, содержащая все общие компоненты для работы чата.

**Зачем нужен**:
- 🎯 **Единообразие протокола** - сервер и клиент используют одинаковые структуры данных
- 🔄 **Избежание дублирования** - общий код не повторяется в разных проектах
- 🛠️ **Централизованное управление** - изменения в протоколе делаются в одном месте
- 🔒 **Типобезопасность** - использование констант вместо магических строк

**Что содержит**:
- `ChatMessage` - структура сообщений чата
- `ChatProtocol` - протокол обмена данными
- `Commands` - константы команд чата
- Методы кодирования/декодирования JSON
- Фабричные методы для создания сообщений

**Принцип работы**: Это "словарь" для общения между сервером и клиентами. Все участники должны знать одни и те же команды, структуры данных и правила обмена сообщениями.

---

### 🖥️ ChatServer - TCP сервер чата

**Назначение**: Основной сервер, управляющий подключениями клиентов и координацией обмена сообщениями.

**Зачем нужен**:
- 🌐 **Центральный узел** - координирует общение между всеми клиентами
- 🔗 **Управление подключениями** - принимает и обрабатывает множественные TCP соединения
- 📡 **Маршрутизация сообщений** - перенаправляет сообщения между клиентами
- 👥 **Управление пользователями** - ведет список онлайн пользователей

**Основные компоненты**:
- `Program.cs` - главный класс сервера с циклом принятия подключений
- `ClientHandler.cs` - обработчик отдельного клиента
- Асинхронная обработка множественных клиентов
- Система команд сервера (`/help`, `/clients`, `/stop`, `/broadcast`)

**Принцип работы**: Работает как "почтовое отделение" - принимает сообщения от одних клиентов и доставляет их другим, ведет учет всех подключенных пользователей.

---

### 💻 ChatClient - Консольный клиент

**Назначение**: Пользовательский интерфейс для подключения к чату и общения с другими пользователями.

**Зачем нужен**:
- 🎨 **Пользовательский интерфейс** - предоставляет удобный способ общения
- 🔌 **Подключение к серверу** - устанавливает TCP соединение с сервером
- 💬 **Отправка сообщений** - позволяет пользователю писать и отправлять сообщения
- 📨 **Получение сообщений** - отображает сообщения от других пользователей

**Основные функции**:
- Красивый консольный интерфейс с цветовым кодированием
- Интерактивные команды (`/help`, `/users`, `/pm`, `/ping`)
- Асинхронное получение сообщений в реальном времени
- Обработка различных типов сообщений (обычные, системные, приватные)

**Принцип работы**: Работает как "телефон" - позволяет пользователю подключаться к серверу и общаться с другими участниками чата.

---

### 🧪 ChatTests - Модульные тесты

**Назначение**: Комплексное тестирование всех компонентов протокола чата для обеспечения надежности.

**Зачем нужен**:
- ✅ **Проверка корректности** - убеждаемся, что код работает правильно
- 🔍 **Автоматическое тестирование** - быстро находим ошибки при изменениях
- 📊 **Покрытие функциональности** - тестируем все аспекты протокола
- 🛡️ **Предотвращение регрессий** - защищаемся от поломок при обновлениях

**Что тестируется**:
- Создание и обработка сообщений
- Кодирование/декодирование JSON
- Обработка различных типов команд
- Граничные случаи (большие сообщения, Unicode)
- Специальные сообщения (ошибки, уведомления)

**Принцип работы**: Работает как "контроль качества" - автоматически проверяет, что все компоненты чата работают корректно и соответствуют ожиданиям.

---

### 📦 packages/ - Зависимости NuGet

**Назначение**: Хранилище внешних библиотек, используемых в проекте.

**Содержит**:
- .NET Framework библиотеки
- Тестовые фреймворки (xUnit)
- Другие необходимые зависимости

**Принцип работы**: Обеспечивает все проекты необходимыми внешними библиотеками для корректной работы.

### 🔄 Схема взаимодействия проектов

```
┌─────────────────────────────────────────────────────────────┐
│                    NetworkChatSolution                     │
│                                                             │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    │
│  │ ChatServer  │    │ ChatClient  │    │ ChatTests   │    │
│  │             │    │             │    │             │    │
│  │ ┌─────────┐ │    │ ┌─────────┐ │    │ ┌─────────┐ │    │
│  │ │Program  │ │    │ │Program  │ │    │ │UnitTest1│ │    │
│  │ │ClientH. │ │    │ │         │ │    │ │         │ │    │
│  │ └─────────┘ │    │ └─────────┘ │    │ └─────────┘ │    │
│  └──────┬──────┘    └──────┬──────┘    └──────┬──────┘    │
│         │                  │                  │           │
│         │                  │                  │           │
│         └──────────────────┼──────────────────┘           │
│                            │                              │
│                   ┌────────▼────────┐                     │
│                   │   ChatCommon    │                     │
│                   │                 │                     │
│                   │ ┌─────────────┐ │                     │
│                   │ │ChatProtocol │ │                     │
│                   │ │ChatMessage  │ │                     │
│                   │ │Commands     │ │                     │
│                   │ │Encode/Decode│ │                     │
│                   │ └─────────────┘ │                     │
│                   └─────────────────┘                     │
└─────────────────────────────────────────────────────────────┘
```

**Как это работает**:
1. **ChatCommon** - общая библиотека, используемая всеми проектами
2. **ChatServer** - использует ChatCommon для работы с протоколом
3. **ChatClient** - использует ChatCommon для общения с сервером
4. **ChatTests** - использует ChatCommon для тестирования функциональности
5. **packages/** - внешние зависимости для всех проектов

### 🏛️ Принципы архитектуры

**1. Разделение ответственности (Separation of Concerns)**
- Каждый проект имеет четко определенную роль
- ChatCommon - протокол, ChatServer - сервер, ChatClient - интерфейс, ChatTests - тестирование

**2. DRY (Don't Repeat Yourself)**
- Общий код вынесен в ChatCommon
- Избегаем дублирования логики между сервером и клиентом

**3. Модульность (Modularity)**
- Каждый компонент может быть разработан и тестирован независимо
- Легко добавлять новые функции или изменять существующие

**4. Слабая связанность (Loose Coupling)**
- Проекты связаны только через общий интерфейс (ChatCommon)
- Изменения в одном проекте минимально влияют на другие

**5. Высокая сплоченность (High Cohesion)**
- Каждый проект содержит только связанную функциональность
- Все компоненты проекта работают для достижения одной цели

## 🚀 Быстрый старт

### Предварительные требования
- .NET 6.0 SDK или выше
- Visual Studio 2022 или VS Code (опционально)

### Запуск проекта

1. **Клонируйте репозиторий** (если необходимо)

2. **Запустите сервер**:
   ```bash
   cd ChatServer
   dotnet run
   ```

3. **Запустите клиент** (в новом терминале):
   ```bash
   cd ChatClient
   dotnet run
   ```

4. **Запустите тесты** (опционально):
   ```bash
   cd ChatTests
   dotnet test
   ```

## 📖 Использование

### Сервер
После запуска сервера вы увидите:
```
╔══════════════════════════════════════════════════════════════╗
║                    🚀 СЕРВЕР ЧАТА 🚀                        ║
║                                                              ║
║  Демонстрация работы с сокетами и TCP/IP протоколами        ║
║  Поддержка множественных клиентов и интерактивного чата     ║
╚══════════════════════════════════════════════════════════════╝

✅ Сервер запущен на порту 12345
🌐 IP адрес: 192.168.1.100
📡 Ожидание подключений...
```

**Команды сервера**:
- `/help` - показать справку
- `/clients` - список подключенных клиентов
- `/stop` - остановить сервер
- `/broadcast <сообщение>` - отправить сообщение всем

### Клиент
После запуска клиента:

1. **Введите имя пользователя** при подключении
2. **Используйте команды**:
   - Просто введите текст для отправки сообщения в общий чат
   - `/help` - показать справку
   - `/users` или `/online` - список онлайн пользователей
   - `/time` - показать время сервера
   - `/pm <пользователь> <сообщение>` - отправить приватное сообщение
   - `/ping` - проверить соединение
   - `/exit` или `/quit` - выйти из чата

## 🔧 Технические детали

### Используемые технологии
- **.NET 6.0** - основная платформа
- **TCP/IP** - транспортный протокол
- **Socket API** - программный интерфейс сокетов
- **JSON** - формат сериализации
- **UTF-8** - кодировка для Unicode

### Сетевые протоколы
- **TCP** - надежный потоковый протокол
- **IP** - протокол сетевого уровня
- **Порт 12345** - стандартный порт чата

### Архитектурные принципы
- **Клиент-серверная модель**
- **Асинхронное программирование**
- **Многопоточность**
- **Потокобезопасность**

## 📚 Документация

Подробная документация доступна в файле `ДОКУМЕНТАЦИЯ_ПРОЕКТА.md`, которая включает:

- Детальное описание всех компонентов
- Объяснение принципов работы
- Примеры кода с комментариями
- Описание сетевых протоколов
- Инструкции по расширению функциональности

## 🧪 Тестирование

Проект включает комплексные модульные тесты, покрывающие:

- Создание и обработку сообщений
- Кодирование/декодирование данных
- Обработку различных типов команд
- Граничные случаи (большие сообщения, Unicode)
- Специальные сообщения (ошибки, уведомления)

Запуск тестов:
```bash
cd ChatTests
dotnet test
```

## 🎓 Образовательная ценность

Проект демонстрирует:

1. **Основы сетевого программирования**:
   - Работа с сокетами
   - TCP/IP протоколы
   - Клиент-серверная архитектура

2. **Программные интерфейсы**:
   - Socket API функции
   - Асинхронное программирование
   - Обработка сетевых данных

3. **Принципы разработки**:
   - Модульность кода
   - Разделение ответственности
   - Обработка ошибок
   - Тестирование

## 🔒 Безопасность

Реализованные меры безопасности:
- Валидация входных данных
- Обработка исключений
- Управление ресурсами
- Потокобезопасность

## 📈 Возможные улучшения

- Шифрование сообщений (TLS/SSL)
- Аутентификация по паролю
- Файловые вложения
- Групповые чаты
- История сообщений
- WebSocket поддержка
- REST API

## 📄 Лицензия

Проект создан в образовательных целях.

## 👨‍💻 Автор

AI Assistant - 2024

---

**Примечание**: Этот проект создан для демонстрации принципов сетевого программирования и может служить отличным учебным материалом для изучения TCP/IP, сокетов и клиент-серверной архитектуры.
